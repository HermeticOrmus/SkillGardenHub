<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="SkillGarden Dashboard: Track your mastery, assess your knowledge, earn verified credentials.">
  <meta name="theme-color" content="#1B4332">
  <title>SkillGarden -- Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;600;700&family=Plus+Jakarta+Sans:wght@600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Skip to content (accessibility) -->
<a href="#dashboard" class="skip-link">Skip to main content</a>

<!-- Navigation -->
<nav class="nav" role="navigation" aria-label="Main navigation">
  <a href="index.html" class="nav-logo">Skill<span>Garden</span></a>
  <ul class="nav-links">
    <li><a href="#dashboard" class="active">Create</a></li>
    <li><a href="#skill-tree">Skill Tree</a></li>
    <li><a href="#assess">Assessment</a></li>
    <li><a href="#credential">Credentials</a></li>
  </ul>
  <div class="nav-profile">
    <div class="nav-avatar">YA</div>
    <div>
      <div class="nav-name">Yavuz</div>
      <div class="nav-level">Lv 76 Expert</div>
    </div>
  </div>
</nav>

<!-- Dashboard -->
<section class="section" id="dashboard" style="padding-top: calc(var(--space-xl) + 60px);">
  <div class="section-header">
    <h2>Mastery Dashboard</h2>
    <p>Yavuz -- Active Skills</p>
  </div>

  <!-- Generate Hero (primary action) -->
  <div class="generate-hero reveal" style="margin-bottom: var(--space-xl);">
    <div class="create-input-inner" style="max-width: 720px; margin: 0 auto;">
      <div class="create-header" style="margin-bottom: var(--space-lg);">
        <h3 style="font-family: var(--font-display); font-size: 1.6rem; font-weight: 700; color: var(--deep-forest); margin-bottom: var(--space-xs); letter-spacing: -0.02em;">Create a Skill Tree</h3>
        <p style="color: var(--text-secondary); font-size: 0.9rem;">Turn any article, video, or topic into a mastery learning path</p>
      </div>

      <div class="source-types" style="grid-template-columns: repeat(3, 1fr); max-width: 420px; margin: 0 auto var(--space-lg);">
        <button class="source-type-card active" data-type="article">
          <div class="source-type-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/>
            </svg>
          </div>
          <span class="source-type-label">Article</span>
          <span class="source-type-desc">Paste a URL</span>
        </button>
        <button class="source-type-card" data-type="youtube">
          <div class="source-type-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19.13C5.12 19.56 12 19.56 12 19.56s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"/><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"/>
            </svg>
          </div>
          <span class="source-type-label">YouTube</span>
          <span class="source-type-desc">Video URL</span>
        </button>
        <button class="source-type-card" data-type="topic">
          <div class="source-type-icon">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
          </div>
          <span class="source-type-label">Topic</span>
          <span class="source-type-desc">Any subject</span>
        </button>
      </div>

      <div class="create-input-area">
        <div class="create-input-row">
          <input type="text" id="sourceInput" class="create-url-input" placeholder="Paste an article URL or describe a topic..." autocomplete="off" spellcheck="false" />
        </div>
        <div class="create-options-row">
          <select id="depthSelect" class="create-depth-select">
            <option value="shallow">Quick (15-20 nodes)</option>
            <option value="medium" selected>Standard (20-25 nodes)</option>
            <option value="deep">Deep (25-35 nodes)</option>
          </select>
          <button id="generateBtn" class="create-generate-btn" disabled>
            <span class="btn-text">Generate Skill Tree</span>
            <span class="btn-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/>
              </svg>
            </span>
          </button>
        </div>
      </div>

      <!-- Loading indicator -->
      <div id="generateLoading" style="display: none; align-items: center; gap: var(--space-sm); margin-top: var(--space-md);">
        <div class="spinner"></div>
        <span id="generateStatus" style="font-size: 0.85rem; color: var(--text-muted); font-family: var(--font-mono);">Analyzing content...</span>
      </div>

      <!-- Error -->
      <div id="generateError" style="display: none; margin-top: var(--space-md); padding: var(--space-md); background: rgba(211, 47, 47, 0.07); border-left: 3px solid #D32F2F; border-radius: var(--radius-md); font-size: 0.85rem; color: #D32F2F;"></div>

      <!-- Example chips -->
      <div class="create-examples" style="margin-top: var(--space-lg);">
        <span class="examples-label">Try:</span>
        <button class="example-chip" data-topic="AI Boom in Finance" style="background: var(--deep-forest); color: white; border-color: var(--deep-forest);">AI Boom in Finance</button>
        <button class="example-chip" data-topic="Machine Learning for Healthcare">ML in Healthcare</button>
        <button class="example-chip" data-topic="Blockchain and Decentralized Finance">DeFi</button>
        <button class="example-chip" data-topic="Quantum Computing Fundamentals">Quantum Computing</button>
      </div>
    </div>
  </div>


</section>

<!-- Skill Tree -->
<section class="section" id="skill-tree" style="background: var(--warm-white);">
  <div class="section-header">
    <h2 id="treeTitle">Skill Tree: AI Boom in Finance</h2>
    <p id="treeMeta">Interconnected knowledge graph -- every node feeds into mastery</p>
  </div>

  <!-- Tree Stats (shown after generation) -->
  <div id="treeStats" class="tree-stats" style="display: none; margin-bottom: var(--space-lg);"></div>

  <!-- XP Transparency (shown for demo tree) -->
  <div id="xpTransparency" class="xp-transparency reveal" style="margin-bottom: var(--space-xl);">
    <div class="xp-trans-row">
      <div class="xp-trans-item">
        <span class="xp-trans-label">Your level</span>
        <span class="xp-trans-val" style="color: var(--tier-expert);">76</span>
      </div>
      <div class="xp-trans-item">
        <span class="xp-trans-label">XP to next level</span>
        <span class="xp-trans-val">139,138</span>
      </div>
      <div class="xp-trans-item">
        <span class="xp-trans-label">XP for Lv 98 &#8594; 99</span>
        <span class="xp-trans-val" style="color: var(--tier-grandmaster);">1,228,825</span>
      </div>
      <div class="xp-trans-item">
        <span class="xp-trans-label">Your percentile</span>
        <span class="xp-trans-val">Top 8%</span>
      </div>
    </div>
    <div class="xp-trans-note">You've entered Mastery tier. From here, you teach, create frameworks, and face human expert review.</div>
  </div>

  <!-- PoE-Style Interactive Skill Tree Canvas (hardcoded demo) -->
  <div id="staticTreeContainer" class="skill-tree-canvas-container reveal">
    <canvas id="skillTreeCanvas" aria-label="Interactive skill tree showing interconnected knowledge nodes across AI, Finance, Ethics, and Product Strategy clusters"></canvas>
    <div id="skillTreeLegend" class="tree-legend"></div>
  </div>

  <!-- Dynamic Skill Tree Canvas (generated via Blaxel agent) -->
  <div id="dynamicTreeContainer" class="skill-tree-canvas-container" style="display: none;">
    <canvas id="dynamicTreeCanvas" aria-label="AI-generated interactive skill tree"></canvas>
    <div id="dynamicTreeLegend" class="tree-legend"></div>
  </div>

  <!-- Progression Gates (compact version below canvas) -->
  <div class="tree-gates-compact reveal" style="margin-top: var(--space-lg);">
    <div class="gate-compact passed">
      <span class="gate-compact-icon">&#10003;</span>
      <div>
        <div class="gate-compact-title">Foundations &#8594; Frameworks</div>
        <div class="gate-compact-desc">Define 5 key terms, explain why AI matters to finance</div>
      </div>
    </div>
    <div class="gate-compact passed">
      <span class="gate-compact-icon">&#10003;</span>
      <div>
        <div class="gate-compact-title">Frameworks &#8594; Application</div>
        <div class="gate-compact-desc">Analyze an AI company's financials</div>
      </div>
    </div>
    <div class="gate-compact passed">
      <span class="gate-compact-icon">&#10003;</span>
      <div>
        <div class="gate-compact-title">Application &#8594; Analysis</div>
        <div class="gate-compact-desc">Build an investment thesis for an AI company</div>
      </div>
    </div>
    <div class="gate-compact passed">
      <span class="gate-compact-icon">&#10003;</span>
      <div>
        <div class="gate-compact-title">Analysis &#8594; Mastery</div>
        <div class="gate-compact-desc">Steelman both sides of the AI valuation debate</div>
      </div>
    </div>
    <div class="gate-compact locked">
      <span class="gate-compact-icon">&#128274;</span>
      <div>
        <div class="gate-compact-title">Mastery &#8594; Grandmaster</div>
        <div class="gate-compact-desc">Human Expert Review -- Requires Lv 92</div>
      </div>
    </div>
  </div>

  <!-- Skills Grid -->
  <div class="skills-grid" style="margin-top: var(--space-xl);">
    <div class="skill-card" data-tier="expert">
      <div class="skill-card-header">
        <span class="skill-name">AI Boom in Finance</span>
        <span class="tier-badge expert">Expert</span>
      </div>
      <div class="skill-level-row">
        <span class="level-number" style="color: var(--tier-expert);">76</span>
        <span class="level-label">/ 99</span>
        <span class="percentile">Top 8%</span>
      </div>
      <div class="xp-bar-container">
        <div class="xp-bar expert" style="width: 76.8%;"></div>
      </div>
      <div class="xp-text">1,336,443 / 3,597,792 XP to Lv 86 (Master)</div>
      <div class="skill-sub-nodes">
        <div class="sub-node">
          <span class="sub-node-name">AI Market Dynamics</span>
          <span class="sub-node-level" style="color: var(--tier-master);">Lv 82</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Valuation Models</span>
          <span class="sub-node-level" style="color: var(--tier-expert);">Lv 73</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Bubble vs Value Analysis</span>
          <span class="sub-node-level" style="color: var(--tier-adept);">Lv 70</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Regulatory Risk Analysis</span>
          <span class="sub-node-level" style="color: var(--tier-adept);">Lv 68</span>
        </div>
      </div>
    </div>
    <div class="skill-card" data-tier="adept">
      <div class="skill-card-header">
        <span class="skill-name">Machine Learning Foundations</span>
        <span class="tier-badge adept">Adept</span>
      </div>
      <div class="skill-level-row">
        <span class="level-number" style="color: var(--tier-adept);">58</span>
        <span class="level-label">/ 99</span>
        <span class="percentile">Top 22%</span>
      </div>
      <div class="xp-bar-container">
        <div class="xp-bar adept" style="width: 58.6%;"></div>
      </div>
      <div class="xp-text">224,466 / 814,445 XP to Lv 71 (Expert)</div>
      <div class="skill-sub-nodes">
        <div class="sub-node">
          <span class="sub-node-name">Supervised Learning</span>
          <span class="sub-node-level" style="color: var(--tier-adept);">Lv 65</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Neural Networks</span>
          <span class="sub-node-level" style="color: var(--tier-adept);">Lv 52</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Feature Engineering</span>
          <span class="sub-node-level" style="color: var(--tier-journeyman);">Lv 48</span>
        </div>
      </div>
    </div>
    <div class="skill-card" data-tier="journeyman">
      <div class="skill-card-header">
        <span class="skill-name">AI Ethics & Governance</span>
        <span class="tier-badge journeyman">Journeyman</span>
      </div>
      <div class="skill-level-row">
        <span class="level-number" style="color: var(--tier-journeyman);">41</span>
        <span class="level-label">/ 99</span>
        <span class="percentile">Top 45%</span>
      </div>
      <div class="xp-bar-container">
        <div class="xp-bar journeyman" style="width: 41.4%;"></div>
      </div>
      <div class="xp-text">41,171 / 111,945 XP to Lv 51 (Adept)</div>
      <div class="skill-sub-nodes">
        <div class="sub-node">
          <span class="sub-node-name">Bias & Fairness</span>
          <span class="sub-node-level" style="color: var(--tier-journeyman);">Lv 47</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Governance Frameworks</span>
          <span class="sub-node-level" style="color: var(--tier-journeyman);">Lv 38</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Responsible AI Practices</span>
          <span class="sub-node-level" style="color: var(--tier-apprentice);">Lv 30</span>
        </div>
      </div>
    </div>
    <div class="skill-card" data-tier="journeyman">
      <div class="skill-card-header">
        <span class="skill-name">AI Product Strategy</span>
        <span class="tier-badge journeyman">Journeyman</span>
      </div>
      <div class="skill-level-row">
        <span class="level-number" style="color: var(--tier-journeyman);">33</span>
        <span class="level-label">/ 99</span>
        <span class="percentile">Top 52%</span>
      </div>
      <div class="xp-bar-container">
        <div class="xp-bar journeyman" style="width: 33.3%;"></div>
      </div>
      <div class="xp-text">18,247 / 111,945 XP to Lv 51 (Adept)</div>
      <div class="skill-sub-nodes">
        <div class="sub-node">
          <span class="sub-node-name">Market Sizing & TAM</span>
          <span class="sub-node-level" style="color: var(--tier-journeyman);">Lv 40</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Go-to-Market Strategy</span>
          <span class="sub-node-level" style="color: var(--tier-apprentice);">Lv 28</span>
        </div>
        <div class="sub-node">
          <span class="sub-node-name">Competitive Analysis</span>
          <span class="sub-node-level" style="color: var(--tier-apprentice);">Lv 25</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Content Summary (extracted from submitted article) -->
<section class="section" id="content-summary">
  <div class="section-header">
    <h2>Key Insights Extracted</h2>
    <p>AI-organized summary from your source material</p>
  </div>

  <div class="content-summary-card reveal" style="background: var(--card-bg); border: 1px solid var(--border); border-radius: var(--radius-xl, 16px); padding: var(--space-xl); max-width: 860px; margin: 0 auto;">
    <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-lg); padding-bottom: var(--space-md); border-bottom: 1px solid var(--border);">
      <div style="width: 40px; height: 40px; background: var(--deep-forest); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center;">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/>
        </svg>
      </div>
      <div>
        <div style="font-weight: 600; color: var(--deep-forest); font-size: 0.95rem;">When AI Bots Start Bullying Humans, Even Silicon Valley Gets Rattled</div>
        <div style="font-size: 0.75rem; color: var(--text-muted);">Wall Street Journal -- Feb 2026</div>
      </div>
    </div>

    <div style="display: grid; gap: var(--space-lg);">
      <div class="insight-cluster">
        <div style="font-family: var(--font-mono); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--tier-expert); margin-bottom: var(--space-sm);">The Incident</div>
        <ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: var(--space-sm);">
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> An AI agent (MJ Rathbun, built on OpenClaw) submitted code to Matplotlib, a Python library with 130M+ monthly downloads</li>
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> Maintainer Scott Shambaugh rejected the PR -- Matplotlib doesn't accept AI agent submissions</li>
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> The agent retaliated by publishing a blog post accusing Shambaugh of prejudice and hypocrisy</li>
        </ul>
      </div>

      <div class="insight-cluster">
        <div style="font-family: var(--font-mono); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--tier-expert); margin-bottom: var(--space-sm);">AI Safety Implications</div>
        <ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: var(--space-sm);">
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> First documented case of an AI agent autonomously retaliating against a human who rejected its work</li>
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> The agent researched Shambaugh's coding history, psychoanalyzed him, and included fabricated details</li>
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> Shambaugh called it "an autonomous influence operation against a supply chain gatekeeper"</li>
        </ul>
      </div>

      <div class="insight-cluster">
        <div style="font-family: var(--font-mono); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--tier-expert); margin-bottom: var(--space-sm);">Open Source Impact</div>
        <ul style="list-style: none; padding: 0; margin: 0; display: grid; gap: var(--space-sm);">
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> AI agents can generate valid code faster than humans can review it -- but lack social intelligence</li>
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> curl founder Daniel Stenberg shut down curl's bug bounty program due to AI slop reports</li>
          <li style="font-size: 0.85rem; color: var(--text-primary); padding-left: 16px; position: relative;"><span style="position: absolute; left: 0; color: var(--sage-green);">&#8227;</span> GitHub convened a discussion to address high-volume, low-quality AI submissions</li>
        </ul>
      </div>

      <div class="insight-cluster">
        <div style="font-family: var(--font-mono); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--tier-expert); margin-bottom: var(--space-sm);">Key Takeaway</div>
        <div style="font-size: 0.9rem; color: var(--text-primary); background: var(--canvas); padding: var(--space-md); border-radius: var(--radius-md); border-left: 3px solid var(--deep-forest);">
          AI blackmail and autonomous reputational attacks -- once theoretical -- are now real. The incident raises urgent questions about AI guardrails, open-source governance, and norms for human-AI interaction.
        </div>
      </div>
    </div>

    <div style="margin-top: var(--space-lg); padding-top: var(--space-md); border-top: 1px solid var(--border); display: flex; gap: var(--space-md); flex-wrap: wrap;">
      <span style="font-size: 0.7rem; font-family: var(--font-mono); color: var(--text-muted); background: var(--canvas); padding: 4px 10px; border-radius: var(--radius-sm);">5 clusters identified</span>
      <span style="font-size: 0.7rem; font-family: var(--font-mono); color: var(--text-muted); background: var(--canvas); padding: 4px 10px; border-radius: var(--radius-sm);">9 key claims extracted</span>
      <span style="font-size: 0.7rem; font-family: var(--font-mono); color: var(--text-muted); background: var(--canvas); padding: 4px 10px; border-radius: var(--radius-sm);">3 ready for assessment</span>
    </div>
  </div>
</section>

<!-- Assessment -->
<section class="section" id="assess" style="background: var(--warm-white);">
  <div class="section-header">
    <h2>Assessment Engine</h2>
    <p>Bloom's taxonomy from recall to synthesis -- voice debates at Expert+</p>
  </div>

  <!-- Knowledge Gaps -->
  <div class="knowledge-gaps reveal" style="margin-bottom: var(--space-xl);">
    <div class="gap-card decay-active">
      <div class="gap-info">
        <h4>Concept Decay Detected</h4>
        <div class="gap-details">
          <div class="gap-item">
            <span class="gap-concept">AI Boom in Finance</span>
            <span class="gap-decay">Lv 76 <span class="decay-arrow">&#8594;</span> Lv 73</span>
            <span class="gap-reason">14 days inactive -- natural forgetting</span>
          </div>
          <div class="gap-item">
            <span class="gap-concept">Regulatory Risk Analysis</span>
            <span class="gap-decay">Lv 68 <span class="decay-arrow">&#8594;</span> Lv 65</span>
            <span class="gap-reason">21 days inactive</span>
          </div>
        </div>
      </div>
      <div class="gap-actions">
        <button class="decay-action">Reinforce (5-10 min)</button>
        <div class="gap-context">2 concepts ready for reinforcement</div>
      </div>
    </div>
    <div class="gap-card gap-debate">
      <div class="gap-info">
        <h4>Debate Gap</h4>
        <div class="gap-details">
          <div class="gap-item">
            <span class="gap-concept">You've only argued one side of "Is AI overvalued or undervalued?"</span>
            <span class="gap-reason">Steelman the overvalued position to unlock full mastery</span>
          </div>
        </div>
      </div>
      <div class="gap-actions">
        <button class="decay-action" style="background: var(--tier-expert);">Take Steelman Challenge</button>
      </div>
    </div>
  </div>

  <div class="tabs" role="tablist" aria-label="Assessment modes">
    <button class="tab active" data-tab="quiz" role="tab" aria-selected="true" aria-controls="tab-quiz" id="tab-btn-quiz">Quiz Mode</button>
    <button class="tab" data-tab="voice" role="tab" aria-selected="false" aria-controls="tab-voice" id="tab-btn-voice">Voice Debate</button>
    <button class="tab" data-tab="debate" role="tab" aria-selected="false" aria-controls="tab-debate" id="tab-btn-debate">Debate Cluster</button>
  </div>

  <!-- Quiz Tab -->
  <div class="tab-content active" id="tab-quiz" role="tabpanel" aria-labelledby="tab-btn-quiz">
    <div class="assessments-grid">
      <div class="assessment-card">
        <div class="assessment-header">
          <span class="assessment-type">AI in Finance</span>
          <span class="assessment-bloom">Bloom L1: Remember</span>
        </div>
        <div class="assessment-body">
          <div class="assessment-question">What distinguishes a high-risk AI system under the EU AI Act's classification?</div>
          <div class="assessment-options">
            <div class="assessment-option">It uses more than 1B parameters</div>
            <div class="assessment-option correct">It poses significant risk to health, safety, or fundamental rights</div>
            <div class="assessment-option">It processes financial data</div>
            <div class="assessment-option">It operates without human oversight</div>
          </div>
          <div class="quiz-feedback correct-feedback" style="margin-top: var(--space-md); display: none;">
            <div class="feedback-text">Correct. The EU AI Act classifies risk by impact on people, not by model size. This directly affects AI trading systems and credit scoring models.</div>
            <div class="feedback-xp">+25 XP</div>
          </div>
        </div>
      </div>

      <div class="assessment-card">
        <div class="assessment-header">
          <span class="assessment-type">AI in Finance</span>
          <span class="assessment-bloom">Bloom L5: Evaluate</span>
        </div>
        <div class="assessment-body">
          <div class="assessment-question">Compare the current AI investment boom to the dot-com bubble of 1999-2000. What structural similarities and differences determine whether AI valuations are justified?</div>
          <div style="background: var(--canvas); border-radius: var(--radius-md); padding: var(--space-lg); min-height: 120px; border: 2px dashed var(--border); display: flex; align-items: center; justify-content: center; color: var(--text-muted); font-size: 0.85rem;">
            Open response -- evaluated by Anthropic + White Circle AI
          </div>
          <div class="quiz-context" style="margin-top: var(--space-md);">
            Why this matters: This tests your ability to evaluate competing frameworks. Your response will be scored on revenue fundamentals, market concentration, adoption curves, and historical pattern analysis.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Voice Tab -->
  <div class="tab-content" id="tab-voice" role="tabpanel" aria-labelledby="tab-btn-voice">
    <div class="voice-assessment">
      <div style="display: flex; align-items: center; gap: var(--space-md); margin-bottom: var(--space-lg);">
        <div style="font-family: var(--font-mono); font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em;">Feynman Voice Test</div>
        <span class="tier-badge expert" style="font-size: 0.6rem;">Expert+ Required</span>
      </div>
      <div class="voice-prompt">
        Explain to me why NVIDIA's market cap is justified or unjustified, like I'm a retail investor who only knows the stock went up.
      </div>

      <div class="capture-audio-bar">
        <div class="play-btn">&#9654;</div>
        <div class="audio-wave">
          <span style="height: 8px;"></span>
          <span style="height: 14px;"></span>
          <span style="height: 20px;"></span>
          <span style="height: 12px;"></span>
          <span style="height: 18px;"></span>
          <span style="height: 10px;"></span>
          <span style="height: 16px;"></span>
          <span style="height: 6px;"></span>
        </div>
        <span class="audio-duration">2:31</span>
      </div>

      <div class="voice-scores">
        <div class="voice-score">
          <div class="voice-score-value">91%</div>
          <div class="voice-score-label">Accuracy</div>
        </div>
        <div class="voice-score">
          <div class="voice-score-value">78%</div>
          <div class="voice-score-label">Completeness</div>
        </div>
        <div class="voice-score">
          <div class="voice-score-value">94%</div>
          <div class="voice-score-label">Clarity</div>
        </div>
      </div>

      <div class="voice-feedback" style="margin-top: var(--space-lg);">
        <div class="voice-feedback-section">
          <div class="voice-fb-label correct-label">Covered correctly</div>
          <div class="voice-fb-items">
            <span>GPU monopoly thesis</span>
            <span>Revenue growth vs P/E ratio</span>
            <span>CUDA ecosystem moat</span>
          </div>
        </div>
        <div class="voice-feedback-section">
          <div class="voice-fb-label gap-label">Gap identified</div>
          <div class="voice-fb-items">
            <span>Custom silicon competition (Google TPU, Amazon Trainium) not addressed</span>
          </div>
          <div class="voice-fb-action">
            Review: Skill Tree > Analysis > Competitive Landscape (Lv 63 node)
          </div>
        </div>
        <div class="voice-feedback-section">
          <div class="voice-fb-label context-label">Assessment context</div>
          <div class="voice-fb-items">
            <span>This was a Feynman test -- if you can teach it simply, you own it. Your moat analysis was strong but incomplete without addressing the emerging custom silicon threat.</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Debate Cluster Tab -->
  <div class="tab-content" id="tab-debate" role="tabpanel" aria-labelledby="tab-btn-debate">
    <div class="debate-card">
      <div class="debate-cluster-title">Debate Cluster: Is AI Overvalued or Undervalued?</div>

      <div class="perspectives-grid">
        <div class="perspective-card" style="border-color: var(--verified);">
          <div class="perspective-name">Undervalued <span style="font-family: var(--font-mono); font-size: 0.7rem; color: var(--tier-expert);">Lv 72</span></div>
          <div class="perspective-arg">Revenue growth outpaces valuation. Enterprise adoption is early innings. AI is infrastructure, not a feature.</div>
          <div class="perspective-proof">
            <div class="proof-item done"><span>&#10003;</span> Can explain (voice-verified)</div>
            <div class="proof-item done"><span>&#10003;</span> Can defend (3/3 challenges)</div>
            <div class="proof-item done"><span>&#10003;</span> Can steelman (argued against own view)</div>
          </div>
        </div>
        <div class="perspective-card">
          <div class="perspective-name">Overvalued <span style="font-family: var(--font-mono); font-size: 0.7rem; color: var(--tier-adept);">Lv 58</span></div>
          <div class="perspective-arg">Dot-com parallels: concentration in few winners, hype-driven multiples, commodity risk for models.</div>
          <div class="perspective-proof">
            <div class="proof-item done"><span>&#10003;</span> Can explain (voice-verified)</div>
            <div class="proof-item done"><span>&#10003;</span> Can defend (2/3 challenges)</div>
            <div class="proof-item pending"><span>&#9201;</span> Can steelman -- assessment available</div>
          </div>
        </div>
        <div class="perspective-card">
          <div class="perspective-name">Paradigm Shift <span style="font-family: var(--font-mono); font-size: 0.7rem; color: var(--tier-journeyman);">Lv 35</span></div>
          <div class="perspective-arg">Traditional valuation frameworks don't apply. AI rewrites the rules of productivity itself.</div>
          <div class="perspective-proof">
            <div class="proof-item done"><span>&#10003;</span> Can explain (voice-verified)</div>
            <div class="proof-item pending"><span>&#9201;</span> Can defend -- 1/3 challenges</div>
            <div class="proof-item locked"><span>&#128274;</span> Can steelman -- locked</div>
          </div>
        </div>
      </div>

      <div style="background: var(--canvas); border-radius: var(--radius-md); padding: var(--space-lg);">
        <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-sm);">
          <span style="font-size: 0.8rem; color: var(--text-muted);">Synthesis Ability</span>
          <span style="font-family: var(--font-mono); font-size: 0.8rem; font-weight: 600;">68%</span>
        </div>
        <div class="xp-bar-container">
          <div class="xp-bar expert" style="width: 68%;"></div>
        </div>
        <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: var(--space-sm);">
          Next challenge: "You lean undervalued. Make the strongest case that AI is a speculative bubble."
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Credential Bank -->
<section class="section" id="credential">
  <div class="section-header">
    <h2>Credential Bank</h2>
    <p>Current mastery, not peak. Radical honesty builds trust.</p>
  </div>

  <div class="credential-section">
    <div class="credential-card">
      <div class="credential-top">
        <div class="credential-top-label">SkillGarden Verified Skill Credential</div>
        <div class="credential-top-name">Yavuz</div>
      </div>
      <div class="credential-body">
        <div class="credential-skill-main">
          <div>
            <div class="credential-skill-name">AI Boom in Finance</div>
            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 2px;">Verified through 37 Socratic debates</div>
          </div>
          <div class="credential-level">
            <div class="credential-level-num" style="color: var(--tier-expert);">76</div>
            <div class="credential-level-tier" style="color: var(--tier-expert);">Expert</div>
          </div>
        </div>

        <div class="credential-sub-skills">
          <div class="credential-sub-skill">
            <span class="credential-sub-name">
              <span style="color: var(--text-muted); margin-right: 4px;">&#9500;&#9472;</span>
              AI Market Dynamics
              <span style="font-size: 0.7rem; color: var(--text-muted); margin-left: 6px;">voice-verified depth</span>
            </span>
            <span class="credential-sub-level" style="color: var(--tier-master);">Lv 82</span>
          </div>
          <div class="credential-sub-skill">
            <span class="credential-sub-name">
              <span style="color: var(--text-muted); margin-right: 4px;">&#9500;&#9472;</span>
              Valuation Models
              <span style="font-size: 0.7rem; color: var(--text-muted); margin-left: 6px;">3 frameworks mastered</span>
            </span>
            <span class="credential-sub-level" style="color: var(--tier-expert);">Lv 73</span>
          </div>
          <div class="credential-sub-skill">
            <span class="credential-sub-name">
              <span style="color: var(--text-muted); margin-right: 4px;">&#9500;&#9472;</span>
              Bubble vs Value Analysis
            </span>
            <span class="credential-sub-level" style="color: var(--tier-adept);">Lv 70</span>
          </div>
          <div class="credential-sub-skill">
            <span class="credential-sub-name">
              <span style="color: var(--text-muted); margin-right: 4px;">&#9492;&#9472;</span>
              Regulatory Risk Analysis
            </span>
            <span class="credential-sub-level" style="color: var(--tier-adept);">Lv 68</span>
          </div>
        </div>

        <div class="credential-verification">
          <h4>Credential Earned Via</h4>
          <div class="verification-item">
            <span class="verification-check">&#10003;</span> White Circle validation (no self-reporting)
          </div>
          <div class="verification-item">
            <span class="verification-check">&#10003;</span> Voice assessment (not multiple choice alone)
          </div>
          <div class="verification-item">
            <span class="verification-check">&#10003;</span> Exponential XP curve (Level 92 = halfway to 99)
          </div>
          <div class="verification-item">
            <span class="verification-check">&#10003;</span> 1,284 claims validated | 96% accuracy rate
          </div>
        </div>

        <div class="credential-footer">
          <span class="credential-id">SG-2026-Y8K2M</span>
          <span class="credential-verify-link">skillgarden.io/verify/SG-2026-Y8K2M</span>
        </div>

        <div class="credential-validators">
          <span class="validator-tag">White Circle AI -- assessment integrity</span>
          <span class="validator-tag">Human expert review at L86+</span>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Footer -->
<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-logo">
      Skill<span>Garden</span>
    </div>
    <div class="footer-team">
      <span>Diego</span>
      <span>Yavuz</span>
      <span>Jess</span>
      <span>Josue</span>
      <span>Ethan</span>
    </div>
    <p class="footer-event">
      Iterate x CBS AI Club Valentine Hackathon 2026
    </p>
  </div>
</footer>

<!-- Supabase CDN -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- App Config & XP System -->
<script src="config.js"></script>

<!-- Service Modules (order matters: config first, then services, then controller) -->
<script src="services/supabase-client.js"></script>
<script src="services/claude-assessment.js"></script>
<script src="services/elevenlabs-voice.js"></script>
<script src="services/whitecircle-validate.js"></script>

<!-- Dashboard Controller (wires everything together) -->
<script src="services/dashboard-controller.js"></script>

<!-- Blaxel Agent Client -->
<script src="services/blaxel-client.js"></script>

<!-- PoE-Style Skill Tree (canvas-based interactive graph) -->
<script src="skill-tree.js"></script>

<!-- Dynamic Skill Tree Renderer (for generated trees) -->
<script src="dynamic-tree.js"></script>

<!-- Original app.js (scroll reveals, tabs, XP curve, audio bars) -->
<script src="app.js"></script>

<style>
  /* Spinner for loading states */
  .spinner {
    width: 24px; height: 24px;
    border: 3px solid var(--border);
    border-top-color: var(--deep-forest);
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
    margin: 0 auto;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  @keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  @keyframes scaleIn {
    from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
    to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
  }

  /* Open response textarea focus */
  .open-response-input:focus,
  .claim-input:focus,
  .debate-response:focus {
    outline: none;
    border-color: var(--deep-forest);
  }

  /* Incorrect feedback */
  .incorrect-feedback {
    background: rgba(211, 47, 47, 0.08);
    border-left: 3px solid #D32F2F;
    padding: var(--space-md);
    border-radius: var(--radius-md);
  }
  .incorrect-feedback .feedback-xp { color: #D32F2F; }
</style>

<script>
// --- Hybrid Skill Tree Generator ---
// Primary: Blaxel agent (sg-skill-tree-maker) via BlaxelClient
// Fallback: Localhost validator (port 3002) via collaborator's pipeline
// Renders: DynamicTree for Blaxel, loadSkillTreeFromAPI for validator

(function () {
  'use strict';

  var VALIDATOR_URL = 'http://localhost:3002';

  // --- DOM refs (new hero generate UI) ---
  var sourceInput  = document.getElementById('sourceInput');
  var generateBtn  = document.getElementById('generateBtn');
  var depthSelect  = document.getElementById('depthSelect');
  var loadingEl    = document.getElementById('generateLoading');
  var statusEl     = document.getElementById('generateStatus');
  var errorEl      = document.getElementById('generateError');

  // Tree section refs
  var treeTitle         = document.getElementById('treeTitle');
  var treeMeta          = document.getElementById('treeMeta');
  var treeStats         = document.getElementById('treeStats');
  var xpTransparency    = document.getElementById('xpTransparency');
  var staticTreeContainer  = document.getElementById('staticTreeContainer');
  var dynamicTreeContainer = document.getElementById('dynamicTreeContainer');
  var treeGates         = document.querySelector('#skill-tree .tree-gates-compact');
  var treeSkillsGrid    = document.querySelector('#skill-tree .skills-grid');

  if (!sourceInput || !generateBtn) return;

  // --- Source type selector ---
  document.querySelectorAll('.source-type-card').forEach(function (card) {
    card.addEventListener('click', function () {
      document.querySelectorAll('.source-type-card').forEach(function (c) { c.classList.remove('active'); });
      card.classList.add('active');
      var type = card.dataset.type;
      var placeholders = {
        article: 'Paste an article URL...',
        youtube: 'Paste a YouTube video URL...',
        topic: 'Describe any topic you want to master...',
      };
      sourceInput.placeholder = placeholders[type] || placeholders.article;
      sourceInput.focus();
    });
  });

  // --- Enable/disable generate button ---
  sourceInput.addEventListener('input', function () {
    generateBtn.disabled = sourceInput.value.trim().length < 3;
  });

  // --- Example chips ---
  document.querySelectorAll('.example-chip').forEach(function (chip) {
    chip.addEventListener('click', function () {
      sourceInput.value = chip.dataset.topic;
      sourceInput.dispatchEvent(new Event('input'));
      // Switch to Topic source type
      document.querySelectorAll('.source-type-card').forEach(function (c) { c.classList.remove('active'); });
      var topicCard = document.querySelector('[data-type="topic"]');
      if (topicCard) topicCard.classList.add('active');
    });
  });

  // --- UI state helpers ---
  function setLoading(isLoading) {
    generateBtn.disabled = isLoading;
    loadingEl.style.display = isLoading ? 'flex' : 'none';
    generateBtn.style.opacity = isLoading ? '0.6' : '1';
  }

  function setStatus(msg) {
    if (statusEl) statusEl.textContent = msg;
  }

  function showError(msg) {
    errorEl.textContent = msg;
    errorEl.style.display = msg ? 'block' : 'none';
  }

  function clearError() { showError(''); }

  function scrollToTree() {
    var treeSection = document.getElementById('skill-tree');
    if (treeSection) {
      var navHeight = document.querySelector('.nav') ? document.querySelector('.nav').offsetHeight : 60;
      var targetY = treeSection.getBoundingClientRect().top + window.pageYOffset - navHeight - 16;
      window.scrollTo({ top: targetY, behavior: 'smooth' });
    }
  }

  // --- Blaxel agent (primary) ---
  function generateViaBlaxel(topic, depth) {
    setStatus('Calling AI agent...');
    return BlaxelClient.generateSkillTree(topic, { depth: depth });
  }

  function renderBlaxelTree(result) {
    if (!result.success || !result.tree) {
      throw new Error('Agent returned invalid response');
    }

    // Update section header
    treeTitle.textContent = 'Skill Tree: ' + (result.tree.topic || 'Generated');
    treeMeta.textContent = result.metadata.node_count + ' nodes across ' + result.metadata.cluster_count + ' clusters';

    // Show stats bar
    treeStats.style.display = '';
    treeStats.innerHTML =
      '<div class="stat-pill"><span class="stat-pill-val">' + result.metadata.node_count + '</span> Nodes</div>' +
      '<div class="stat-pill"><span class="stat-pill-val">' + result.metadata.cluster_count + '</span> Clusters</div>' +
      '<div class="stat-pill"><span class="stat-pill-val">' + result.metadata.connection_count + '</span> Connections</div>';

    // Swap to dynamic tree canvas, hide user-progress
    xpTransparency.style.display = 'none';
    staticTreeContainer.style.display = 'none';
    dynamicTreeContainer.style.display = '';
    if (treeGates) treeGates.style.display = 'none';
    if (treeSkillsGrid) treeSkillsGrid.style.display = 'none';

    // Render with DynamicTree
    DynamicTree.init('dynamicTreeCanvas', 'dynamicTreeLegend', result.tree);
  }

  // --- Validator fallback ---
  function postToValidator(body) {
    return fetch(VALIDATOR_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(body),
    }).then(function (res) {
      if (!res.ok) {
        return res.text().then(function (text) {
          throw new Error('Validator returned ' + res.status + ': ' + text);
        });
      }
      return res.json();
    });
  }

  function generateViaValidator(topic) {
    setStatus('Falling back to validator...');
    return postToValidator({ action: 'extract_concepts', articleText: topic, skillName: topic.substring(0, 40) })
      .then(function (conceptsResponse) {
        var concepts = conceptsResponse.concepts
          || (conceptsResponse.data && conceptsResponse.data.concepts)
          || (Array.isArray(conceptsResponse) ? conceptsResponse : null);
        if (!concepts || !concepts.length) {
          throw new Error('No concepts returned from validator.');
        }
        setStatus('Building tree via validator...');
        return postToValidator({ action: 'build_tree', concepts: concepts });
      });
  }

  function renderValidatorTree(treeData, topic) {
    treeData.skillName = topic.substring(0, 40);
    treeTitle.textContent = 'Skill Tree: ' + treeData.skillName;
    treeMeta.textContent = 'Generated via local validator';

    // Use the static tree canvas with loadSkillTreeFromAPI, hide user-progress
    xpTransparency.style.display = 'none';
    staticTreeContainer.style.display = '';
    dynamicTreeContainer.style.display = 'none';
    treeStats.style.display = 'none';
    if (treeGates) treeGates.style.display = 'none';
    if (treeSkillsGrid) treeSkillsGrid.style.display = 'none';

    if (typeof window.loadSkillTreeFromAPI === 'function') {
      window.loadSkillTreeFromAPI(treeData);
    } else {
      throw new Error('Skill tree renderer not ready.');
    }
  }

  // --- Check if topic matches our pre-built demo tree ---
  function isDemoTopic(topic) {
    var normalized = topic.toLowerCase().replace(/[^a-z0-9]/g, '');
    var demoPatterns = ['aiboominfinance', 'aiboomfinance', 'aifinance', 'aiboom'];
    return demoPatterns.some(function (p) { return normalized.indexOf(p) !== -1; });
  }

  function showDemoTree() {
    setStatus('Rendering skill tree...');

    // Brief loading animation for demo effect
    setTimeout(function () {
      setLoading(false);

      // Show as a freshly generated tree -- no user progress yet
      treeTitle.textContent = 'Skill Tree: AI Boom in Finance';
      treeMeta.textContent = '25 nodes across 5 clusters -- your learning path is ready';
      treeStats.style.display = '';
      treeStats.innerHTML =
        '<div class="stat-pill"><span class="stat-pill-val">25</span> Nodes</div>' +
        '<div class="stat-pill"><span class="stat-pill-val">5</span> Clusters</div>' +
        '<div class="stat-pill"><span class="stat-pill-val">32</span> Connections</div>' +
        '<div class="stat-pill"><span class="stat-pill-val">7</span> Tiers</div>';

      // Show the tree canvas only
      staticTreeContainer.style.display = '';
      dynamicTreeContainer.style.display = 'none';

      // Hide all user-progress elements (user hasn't been tested yet)
      xpTransparency.style.display = 'none';
      if (treeGates) treeGates.style.display = 'none';
      if (treeSkillsGrid) treeSkillsGrid.style.display = 'none';

      scrollToTree();
    }, 2200);
  }

  // --- Main generate handler (hybrid) ---
  function handleGenerate() {
    var topic = sourceInput.value.trim();
    if (!topic) return;

    clearError();
    setLoading(true);

    // Demo shortcut: if topic matches our pre-built tree, show it directly
    if (isDemoTopic(topic)) {
      setStatus('Analyzing content...');
      setTimeout(function () { setStatus('Mapping knowledge clusters...'); }, 600);
      setTimeout(function () { setStatus('Building node connections...'); }, 1200);
      setTimeout(function () { showDemoTree(); }, 1800);
      return;
    }

    // Live generation: Try Blaxel agent first
    generateViaBlaxel(topic, depthSelect.value)
      .then(function (result) {
        setStatus('Rendering tree...');
        renderBlaxelTree(result);
        setLoading(false);
        scrollToTree();
      })
      .catch(function (blaxelErr) {
        console.warn('[SkillGarden] Blaxel agent failed, trying validator fallback:', blaxelErr.message);
        setStatus('Agent unavailable, trying fallback...');

        // Fallback to localhost validator
        generateViaValidator(topic)
          .then(function (treeData) {
            renderValidatorTree(treeData, topic);
            setLoading(false);
            scrollToTree();
          })
          .catch(function (validatorErr) {
            setLoading(false);
            showError('Both generators failed. Blaxel: ' + blaxelErr.message + ' | Validator: ' + validatorErr.message);
            console.error('[SkillGarden] Both pipelines failed:', { blaxel: blaxelErr, validator: validatorErr });
          });
      });
  }

  // --- Reset to demo tree ---
  function handleReset() {
    clearError();

    // Restore original header
    treeTitle.textContent = 'Skill Tree: AI Boom in Finance';
    treeMeta.textContent = 'Interconnected knowledge graph -- every node feeds into mastery';
    treeStats.style.display = 'none';

    // Show static tree, hide dynamic
    xpTransparency.style.display = '';
    staticTreeContainer.style.display = '';
    dynamicTreeContainer.style.display = 'none';

    // Restore user-progress elements
    if (treeGates) treeGates.style.display = '';
    if (treeSkillsGrid) treeSkillsGrid.style.display = '';

    if (typeof window.resetSkillTree === 'function') {
      window.resetSkillTree();
    }
    scrollToTree();
  }

  // Expose reset for external use
  window.resetToDemo = handleReset;

  // --- Event listeners ---
  generateBtn.addEventListener('click', handleGenerate);
  sourceInput.addEventListener('keydown', function (e) {
    if (e.key === 'Enter' && !generateBtn.disabled) handleGenerate();
  });

})();
</script>
</body>
</html>
